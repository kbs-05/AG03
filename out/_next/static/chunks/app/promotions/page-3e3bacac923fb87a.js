(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{4978:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(5155),r=a(5695),l=a(3915),n=a(5317);function i(){return(0,r.useRouter)(),(0,s.jsx)("header",{className:"bg-white shadow-sm border-b px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Tableau de bord"})}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("button",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-user-line text-green-600"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Admin"})]})})]})})}(0,l.Dk)().length||(0,l.Wp)({apiKey:"AIzaSyAYRMKz-rdcDJ9_wSC4GPJ5Nr9JGHNf98s",authDomain:"ag02-9e907.firebaseapp.com",projectId:"ag02-9e907",storageBucket:"ag02-9e907.firebasestorage.app",messagingSenderId:"646527347928",appId:"1:646527347928:web:dca6972379e7f72027bbad",measurementId:"G-8MX1LYCXS6"}),(0,n.aU)()},5332:(e,t,a)=>{Promise.resolve().then(a.bind(a,8740))},7349:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(5155),r=a(2115),l=a(6874),n=a.n(l),i=a(5695);function d(){let e=(0,i.usePathname)(),[t,a]=(0,r.useState)("dashboard");return(0,r.useEffect)(()=>{"/"===e?a("dashboard"):e.startsWith("/produits")?a("produits"):e.startsWith("/clients")?a("clients"):e.startsWith("/commandes")&&a("commandes")},[e]),(0,s.jsxs)("div",{className:"w-64 bg-white shadow-lg h-full",children:[(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-plant-line text-white"})}),(0,s.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Agri-Gabon"})]})}),(0,s.jsx)("div",{className:"p-6 border-b",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-user-line text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Admin"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Administrateur"})]})]})}),(0,s.jsx)("nav",{className:"mt-6",children:[{id:"dashboard",label:"Dashboard",icon:"ri-dashboard-line",href:"/"},{id:"produits",label:"Produits",icon:"ri-product-hunt-line",href:"/produits"},{id:"clients",label:"Clients",icon:"ri-team-line",href:"/clients"},{id:"commandes",label:"Commandes",icon:"ri-shopping-cart-line",href:"/commandes"}].map(e=>(0,s.jsxs)(n(),{href:e.href,className:"flex items-center space-x-3 px-6 py-3 text-sm font-medium transition-colors ".concat(t===e.id?"bg-green-50 text-green-700 border-r-2 border-green-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>a(e.id),children:[(0,s.jsx)("i",{className:"".concat(e.icon," w-5 h-5 flex items-center justify-center")}),(0,s.jsx)("span",{children:e.label})]},e.id))})]})}},8740:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(5155),r=a(2115),l=a(7349),n=a(4978),i=a(8915),d=a(5317);let c=(e,t)=>{if(!e||!t)return"scheduled";let a=new Date(e),s=new Date(t),r=new Date;return a<=r&&s>=r?"active":a>r?"scheduled":"expired"},o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="";for(let s=0;s<e;s++)a+=t.charAt(Math.floor(Math.random()*t.length));return a},u=e=>{if(!e)return"-";try{let t=new Date(e);if(isNaN(t.getTime()))return(null==e?void 0:e.toLocaleDateString)?e.toLocaleDateString():String(e);return t.toLocaleDateString()}catch(t){return String(e)}};function x(){let[e,t]=(0,r.useState)("promotions"),[a,x]=(0,r.useState)([]),[p,m]=(0,r.useState)(!0),[h,g]=(0,r.useState)(!1),[b,y]=(0,r.useState)({name:"",product:"",type:"percentage",value:"",startDate:"",endDate:"",maxUsage:"",generateCode:!1,code:""}),[j,v]=(0,r.useState)(null),[N,f]=(0,r.useState)(null),w=["Bananes plantains","Igname blanche","Tomates fra\xeeches","Riz blanc","Poisson fum\xe9","Tous les fruits","Tous les l\xe9gumes"];(0,r.useEffect)(()=>{m(!0);let e=(0,d.rJ)(i.db,"promotions"),t=(0,d.aQ)(e,e=>{x(e.docs.map(e=>{var t,a,s,r,l,n,i,d,o,u,x;let p=e.data();return{id:e.id,name:null!=(t=p.name)?t:"",product:null!=(a=p.product)?a:null,type:null!=(s=p.type)?s:"percentage",value:null!=(r=p.value)?r:null,startDate:null!=(l=p.startDate)?l:"",endDate:null!=(n=p.endDate)?n:"",status:null!=(i=p.status)?i:c(p.startDate,p.endDate),usageCount:null!=(d=p.usageCount)?d:0,maxUsage:null!=(o=p.maxUsage)?o:null,couponCode:null!=(u=p.couponCode)?u:null,createdAt:null!=(x=p.createdAt)?x:null}})),m(!1)},e=>{console.error("Erreur chargement promotions:",e),m(!1)});return()=>t()},[]);let C=async e=>{if(e.preventDefault(),!b.name||!b.startDate||!b.endDate)return void alert("Veuillez renseigner au moins le nom et la p\xe9riode.");if("free_shipping"!==b.type&&(!b.value||Number.isNaN(Number(b.value))))return void alert("Veuillez saisir une valeur valide pour la remise.");let t=c(b.startDate,b.endDate),a=b.generateCode?b.code||o():b.code||null,s={name:b.name,product:b.product||null,type:b.type,value:"free_shipping"!==b.type?Number(b.value):null,startDate:b.startDate,endDate:b.endDate,status:t,usageCount:0,maxUsage:b.maxUsage?Number(b.maxUsage):null,couponCode:a,createdAt:(0,d.O5)()};try{await (0,d.gS)((0,d.rJ)(i.db,"promotions"),s),g(!1),y({name:"",product:"",type:"percentage",value:"",startDate:"",endDate:"",maxUsage:"",generateCode:!1,code:""})}catch(e){console.error("Erreur cr\xe9ation promotion:",e),alert("Erreur lors de la cr\xe9ation de la promotion.")}},k=e=>{var t,a,s,r;v(e.id),f({name:e.name,product:null!=(t=e.product)?t:"",type:e.type,value:null!=(a=e.value)?a:"",startDate:e.startDate,endDate:e.endDate,maxUsage:null!=(s=e.maxUsage)?s:"",code:null!=(r=e.couponCode)?r:""})},D=async e=>{if(e.preventDefault(),!j||!N)return;let t=c(N.startDate,N.endDate),a={name:N.name,product:N.product||null,type:N.type,value:"free_shipping"!==N.type?Number(N.value):null,startDate:N.startDate,endDate:N.endDate,status:t,maxUsage:N.maxUsage?Number(N.maxUsage):null,couponCode:N.code||null};try{let e=(0,d.H9)(i.db,"promotions",j);await (0,d.mZ)(e,a),v(null),f(null)}catch(e){console.error("Erreur mise \xe0 jour promotion:",e),alert("Erreur lors de la mise \xe0 jour.")}},T=async e=>{if(confirm("Supprimer cette promotion ?"))try{await (0,d.kd)((0,d.H9)(i.db,"promotions",e))}catch(e){console.error("Erreur suppression promotion:",e),alert("Impossible de supprimer la promotion.")}},S=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},A=e=>{switch(e){case"active":return"Active";case"scheduled":return"Programm\xe9e";case"expired":return"Expir\xe9e";default:return e}},[P,E]=(0,r.useState)([]),[U,B]=(0,r.useState)(!0),[I,q]=(0,r.useState)(!1),[_,M]=(0,r.useState)({badge:"",badgeBg:"bg-red-50",badgeText:"text-red-500",subtext:"",title:"",description:"",buttonText:"",icon:"arrow-forward-outline",link:"",type:"news",isPublished:!0}),[J,L]=(0,r.useState)(null),[R,z]=(0,r.useState)(null);(0,r.useEffect)(()=>{B(!0);let e=(0,d.rJ)(i.db,"news"),t=(0,d.aQ)(e,e=>{E(e.docs.map(e=>{var t,a,s,r,l,n,i,d,c,o,u,x;let p=e.data();return{id:e.id,badge:null!=(t=p.badge)?t:"",badgeBg:null!=(a=p.badgeBg)?a:"bg-gray-100",badgeText:null!=(s=p.badgeText)?s:"text-gray-800",subtext:null!=(r=p.subtext)?r:"",title:null!=(l=p.title)?l:"",description:null!=(n=p.description)?n:"",buttonText:null!=(i=p.buttonText)?i:"",icon:null!=(d=p.icon)?d:"arrow-forward-outline",link:null!=(c=p.link)?c:null,type:null!=(o=p.type)?o:"news",isPublished:null!=(u=p.isPublished)&&u,createdAt:null!=(x=p.createdAt)?x:null}})),B(!1)},e=>{console.error("Erreur chargement actualit\xe9s:",e),B(!1)});return()=>t()},[]);let G=async e=>{if(e.preventDefault(),!_.title||!_.description)return void alert("Titre et description requis.");try{await (0,d.gS)((0,d.rJ)(i.db,"news"),{badge:_.badge,badgeBg:_.badgeBg,badgeText:_.badgeText,subtext:_.subtext,title:_.title,description:_.description,buttonText:_.buttonText,icon:_.icon,link:_.link||null,type:_.type,isPublished:_.isPublished,createdAt:(0,d.O5)()}),q(!1),M({badge:"",badgeBg:"bg-red-50",badgeText:"text-red-500",subtext:"",title:"",description:"",buttonText:"",icon:"arrow-forward-outline",link:"",type:"news",isPublished:!0})}catch(e){console.error("Erreur cr\xe9ation actualit\xe9:",e),alert("Erreur lors de la cr\xe9ation de l'actualit\xe9/publicit\xe9.")}},H=e=>{L(e.id),z({badge:e.badge,badgeBg:e.badgeBg,badgeText:e.badgeText,subtext:e.subtext,title:e.title,description:e.description,buttonText:e.buttonText,icon:e.icon,link:e.link||"",type:e.type,isPublished:e.isPublished})},O=async e=>{if(e.preventDefault(),J&&R)try{let e=(0,d.H9)(i.db,"news",J);await (0,d.mZ)(e,{...R,link:R.link||null}),L(null),z(null)}catch(e){console.error("Erreur mise \xe0 jour actualit\xe9:",e),alert("Erreur lors de la mise \xe0 jour de l'actualit\xe9/publicit\xe9.")}},X=async e=>{if(confirm("Supprimer cette actualit\xe9/publicit\xe9 ?"))try{await (0,d.kd)((0,d.H9)(i.db,"news",e))}catch(e){console.error("Erreur suppression actualit\xe9:",e),alert("Impossible de supprimer l'actualit\xe9.")}},W=async e=>{try{await (0,d.mZ)((0,d.H9)(i.db,"news",e.id),{isPublished:!e.isPublished})}catch(e){console.error("Erreur changement statut publication:",e),alert("Impossible de modifier le statut de publication.")}};return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,s.jsx)(l.A,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex space-x-4 border-b mb-6",children:[(0,s.jsx)("button",{onClick:()=>t("promotions"),className:"px-4 py-2 ".concat("promotions"===e?"border-b-2 border-green-600 text-green-600":"text-gray-500"),children:"Promotions / Coupons"}),(0,s.jsx)("button",{onClick:()=>t("news"),className:"px-4 py-2 ".concat("news"===e?"border-b-2 border-green-600 text-green-600":"text-gray-500"),children:"Actualit\xe9s / Publicit\xe9s"})]}),"promotions"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Promotions & Coupons"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Cr\xe9ez et g\xe9rez vos promotions, r\xe9ductions et offres (ex: livraison gratuite)."})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 font-medium",children:[(0,s.jsx)("i",{className:"ri-add-line"}),(0,s.jsx)("span",{children:"Nouvelle promotion"})]})})]}),h&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Cr\xe9er une nouvelle promotion"}),(0,s.jsx)("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"ri-close-line"})})]}),(0,s.jsxs)("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Nom de la promotion",value:b.name,onChange:e=>y({...b,name:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsxs)("select",{value:b.product,onChange:e=>y({...b,product:e.target.value}),className:"border rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"",children:"Choisir un produit (optionnel)"}),w.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:b.type,onChange:e=>y({...b,type:e.target.value}),className:"border rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"percentage",children:"R\xe9duction (%)"}),(0,s.jsx)("option",{value:"fixed",children:"R\xe9duction fixe"}),(0,s.jsx)("option",{value:"free_shipping",children:"Livraison gratuite"})]}),"free_shipping"!==b.type&&(0,s.jsx)("input",{type:"number",placeholder:"Valeur (ex: 10 pour 10% ou 1000 pour 1000 XAF)",value:b.value,onChange:e=>y({...b,value:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsx)("input",{type:"date",value:b.startDate,onChange:e=>y({...b,startDate:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsx)("input",{type:"date",value:b.endDate,onChange:e=>y({...b,endDate:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsx)("input",{type:"number",placeholder:"Max utilisations (optionnel)",value:b.maxUsage,onChange:e=>y({...b,maxUsage:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("label",{className:"inline-flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:b.generateCode,onChange:e=>y({...b,generateCode:e.target.checked})}),(0,s.jsx)("span",{children:"G\xe9n\xe9rer un code coupon"})]}),b.generateCode&&(0,s.jsx)("input",{type:"text",placeholder:"Code (laisser vide pour auto)",value:b.code,onChange:e=>y({...b,code:e.target.value.toUpperCase()}),className:"border rounded px-3 py-2"})]}),(0,s.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Enregistrer"})})]})]}),j&&N&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Modifier la promotion"}),(0,s.jsx)("button",{onClick:()=>{v(null),f(null)},className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"ri-close-line"})})]}),(0,s.jsxs)("form",{onSubmit:D,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Nom",value:N.name,onChange:e=>f({...N,name:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsxs)("select",{value:N.product,onChange:e=>f({...N,product:e.target.value}),className:"border rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"",children:"Choisir un produit (optionnel)"}),w.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:N.type,onChange:e=>f({...N,type:e.target.value}),className:"border rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"percentage",children:"R\xe9duction (%)"}),(0,s.jsx)("option",{value:"fixed",children:"R\xe9duction fixe"}),(0,s.jsx)("option",{value:"free_shipping",children:"Livraison gratuite"})]}),"free_shipping"!==N.type&&(0,s.jsx)("input",{type:"number",placeholder:"Valeur",value:N.value,onChange:e=>f({...N,value:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsx)("input",{type:"date",value:N.startDate,onChange:e=>f({...N,startDate:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsx)("input",{type:"date",value:N.endDate,onChange:e=>f({...N,endDate:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsx)("input",{type:"number",placeholder:"Max utilisations",value:N.maxUsage,onChange:e=>f({...N,maxUsage:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Code coupon",value:N.code,onChange:e=>f({...N,code:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsxs)("div",{className:"md:col-span-2 flex justify-end space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{v(null),f(null)},className:"px-4 py-2 border rounded",children:"Annuler"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Mettre \xe0 jour"})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:p?(0,s.jsx)("p",{className:"p-6",children:"Chargement des promotions..."}):(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Promotion"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remise"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Code"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P\xe9riode"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisation"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[0===a.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"px-6 py-4 whitespace-nowrap text-center text-gray-500",children:"Aucune promotion disponible."})}),a.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.product||"-"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"percentage"===e.type?"".concat(e.value,"%"):"fixed"===e.type?"".concat(e.value," XAF"):"Livraison gratuite"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.couponCode||"-"}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[u(e.startDate)," - ",u(e.endDate)]}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.usageCount,e.maxUsage?"/".concat(e.maxUsage):""]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(S(e.status)),children:A(e.status)})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>k(e),className:"text-blue-600 hover:text-blue-700",children:(0,s.jsx)("i",{className:"ri-edit-line"})}),(0,s.jsx)("button",{onClick:()=>T(e.id),className:"text-red-600 hover:text-red-700",children:(0,s.jsx)("i",{className:"ri-delete-bin-line"})})]})})]},e.id))]})]})})})]}),"news"===e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Actualit\xe9s & Publicit\xe9s"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Ajoutez des informations, annonces ou publicit\xe9s visibles depuis l'application client."})]}),(0,s.jsx)("div",{children:(0,s.jsxs)("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 font-medium",children:[(0,s.jsx)("i",{className:"ri-add-line"}),(0,s.jsx)("span",{children:"Nouvelle actualit\xe9"})]})})]}),I&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Cr\xe9er une actualit\xe9 / publicit\xe9"}),(0,s.jsx)("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"ri-close-line"})})]}),(0,s.jsxs)("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Badge (ex: -20% / Nouveau)",value:_.badge,onChange:e=>M({..._,badge:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Classe Tailwind badgeBg (ex: bg-red-50)",value:_.badgeBg,onChange:e=>M({..._,badgeBg:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Classe Tailwind badgeText (ex: text-red-500)",value:_.badgeText,onChange:e=>M({..._,badgeText:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Sous-texte (ex: Offre limit\xe9e)",value:_.subtext,onChange:e=>M({..._,subtext:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Titre",value:_.title,onChange:e=>M({..._,title:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsxs)("select",{value:_.type,onChange:e=>M({..._,type:e.target.value}),className:"border rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"news",children:"Actualit\xe9"}),(0,s.jsx)("option",{value:"advertisement",children:"Publicit\xe9"})]}),(0,s.jsx)("textarea",{placeholder:"Description",value:_.description,onChange:e=>M({..._,description:e.target.value}),className:"border rounded px-3 py-2 md:col-span-2",required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Texte du bouton (ex: En profiter)",value:_.buttonText,onChange:e=>M({..._,buttonText:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Ic\xf4ne (ex: arrow-forward-outline)",value:_.icon,onChange:e=>M({..._,icon:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"url",placeholder:"Lien (optionnel)",value:_.link,onChange:e=>M({..._,link:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsxs)("label",{className:"inline-flex items-center space-x-2 md:col-span-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:_.isPublished,onChange:e=>M({..._,isPublished:e.target.checked})}),(0,s.jsx)("span",{children:"Publi\xe9"})]}),(0,s.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Enregistrer"})})]})]}),J&&R&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Modifier actualit\xe9 / publicit\xe9"}),(0,s.jsx)("button",{onClick:()=>{L(null),z(null)},className:"text-gray-400 hover:text-gray-600",children:(0,s.jsx)("i",{className:"ri-close-line"})})]}),(0,s.jsxs)("form",{onSubmit:O,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Badge",value:R.badge,onChange:e=>z({...R,badge:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"badgeBg",value:R.badgeBg,onChange:e=>z({...R,badgeBg:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"badgeText",value:R.badgeText,onChange:e=>z({...R,badgeText:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Sous-texte",value:R.subtext,onChange:e=>z({...R,subtext:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"text",placeholder:"Titre",value:R.title,onChange:e=>z({...R,title:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsxs)("select",{value:R.type,onChange:e=>z({...R,type:e.target.value}),className:"border rounded px-3 py-2",children:[(0,s.jsx)("option",{value:"news",children:"Actualit\xe9"}),(0,s.jsx)("option",{value:"advertisement",children:"Publicit\xe9"})]}),(0,s.jsx)("textarea",{placeholder:"Description",value:R.description,onChange:e=>z({...R,description:e.target.value}),className:"border rounded px-3 py-2 md:col-span-2",required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Texte du bouton",value:R.buttonText,onChange:e=>z({...R,buttonText:e.target.value}),className:"border rounded px-3 py-2",required:!0}),(0,s.jsx)("input",{type:"text",placeholder:"Ic\xf4ne",value:R.icon,onChange:e=>z({...R,icon:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsx)("input",{type:"url",placeholder:"Lien",value:R.link,onChange:e=>z({...R,link:e.target.value}),className:"border rounded px-3 py-2"}),(0,s.jsxs)("label",{className:"inline-flex items-center space-x-2 md:col-span-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:R.isPublished,onChange:e=>z({...R,isPublished:e.target.checked})}),(0,s.jsx)("span",{children:"Publi\xe9"})]}),(0,s.jsxs)("div",{className:"md:col-span-2 flex justify-end space-x-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{L(null),z(null)},className:"px-4 py-2 border rounded",children:"Annuler"}),(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Mettre \xe0 jour"})]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:U?(0,s.jsx)("p",{className:"p-6",children:"Chargement des actualit\xe9s..."}):(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Badge"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Titre"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Publi\xe9"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[0===P.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-4 whitespace-nowrap text-center text-gray-500",children:"Aucune actualit\xe9 disponible."})}),P.map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 rounded ".concat(e.badgeBg," ").concat(e.badgeText),children:e.badge||"-"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:"news"===e.type?"Actualit\xe9":"Publicit\xe9"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.isPublished?"Oui":"Non"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.createdAt?u((null==(t=e.createdAt)?void 0:t.toDate)?e.createdAt.toDate():e.createdAt):"-"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>H(e),className:"text-blue-600 hover:text-blue-700",children:(0,s.jsx)("i",{className:"ri-edit-line"})}),(0,s.jsx)("button",{onClick:()=>X(e.id),className:"text-red-600 hover:text-red-700",children:(0,s.jsx)("i",{className:"ri-delete-bin-line"})}),(0,s.jsx)("button",{onClick:()=>W(e),className:"text-gray-700 hover:text-gray-900",children:e.isPublished?"Retirer":"Publier"})]})})]},e.id)})]})]})})})]})]})})]})]})}},8915:(e,t,a)=>{"use strict";a.d(t,{I:()=>d,db:()=>i,y:()=>n});var s=a(3915),r=a(5317),l=a(7505);let n=(0,s.Dk)().length?(0,s.Dk)()[0]:(0,s.Wp)({apiKey:"AIzaSyAYRMKz-rdcDJ9_wSC4GPJ5Nr9JGHNf98s",authDomain:"ag02-9e907.firebaseapp.com",projectId:"ag02-9e907",storageBucket:"ag02-9e907.firebasestorage.app",messagingSenderId:"646527347928",appId:"1:646527347928:web:dca6972379e7f72027bbad",measurementId:"G-8MX1LYCXS6"}),i=(0,r.aU)(n),d=(0,l.c7)(n)}},e=>{var t=t=>e(e.s=t);e.O(0,[135,243,441,684,358],()=>t(5332)),_N_E=e.O()}]);