(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{2181:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>m});var r=a(5155),t=a(2115),l=a(7349),i=a(4978),n=a(8915),d=a(5317),c=a(7505);let o=async e=>{try{let s=Date.now(),a="".concat(s,"_").concat(e.name),r=(0,c.KR)(n.I,"products/".concat(a)),t=await (0,c.D)(r,e);return await (0,c.qk)(t.ref)}catch(e){throw console.error("Erreur lors de l’upload de l’image:",e),e}};function m(){let[e,s]=(0,t.useState)({name:"",category:"",price:"",cost:"",stock:"",minStock:"",description:"",supplier:"",unit:"kg"}),[a,c]=(0,t.useState)(null),[m,u]=(0,t.useState)(null),[x,p]=(0,t.useState)(!1),[h,g]=(0,t.useState)(null),b=async r=>{r.preventDefault(),p(!0),g(null);try{let r=parseFloat(e.price),t=parseFloat(e.cost),l=parseInt(e.stock,10),i=parseInt(e.minStock,10);if(isNaN(r)||r<0||isNaN(t)||t<0||isNaN(l)||l<0||isNaN(i)||i<0)throw Error("Veuillez remplir correctement les champs num\xe9riques (valeurs positives).");let m="";a&&(m=await o(a));let x={name:e.name,category:e.category,price:r,cost:t,stock:l,minStock:i,description:e.description,supplier:e.supplier,unit:e.unit,imageUrl:m,createdAt:(0,d.O5)()};await (0,d.gS)((0,d.rJ)(n.db,"products"),x),alert("Produit ajout\xe9 avec succ\xe8s !"),s({name:"",category:"",price:"",cost:"",stock:"",minStock:"",description:"",supplier:"",unit:"kg"}),c(null),u(null)}catch(e){console.error("Erreur ajout produit:",e),g(e.message||"Une erreur est survenue.")}finally{p(!1)}},j=a=>{s({...e,[a.target.name]:a.target.value})};return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-6",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Ajouter un nouveau produit"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Remplissez les informations ci-dessous pour ajouter un produit"})]}),(0,r.jsxs)("form",{onSubmit:b,className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image du produit"}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let s=e.target.files[0];if(s.size>5242880){g("La taille de l’image ne doit pas d\xe9passer 5 Mo."),c(null),u(null);return}c(s),g(null);let a=new FileReader;a.onload=()=>{u(a.result)},a.readAsDataURL(s)}},className:"w-full"}),a&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-700",children:["Image s\xe9lectionn\xe9e : ",a.name]}),m&&(0,r.jsx)("img",{src:m,alt:"Aper\xe7u produit",className:"mt-3 max-h-48 object-contain"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du produit *"}),(0,r.jsx)("input",{type:"text",name:"name",value:e.name,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: Bananes plantains"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cat\xe9gorie *"}),(0,r.jsxs)("select",{name:"category",value:e.category,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,r.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),[{id:"fruits",name:"Fruits"},{id:"legumes",name:"L\xe9gumes"},{id:"tubercules",name:"Tubercules"},{id:"cereales",name:"C\xe9r\xe9ales"},{id:"poissons",name:"Poissons"},{id:"viandes",name:"Viandes"},{id:"boissons",name:"Boissons"}].map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prix de vente (XAF) *"}),(0,r.jsx)("input",{type:"number",name:"price",value:e.price,onChange:j,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: 3500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Co\xfbt d'achat (XAF) *"}),(0,r.jsx)("input",{type:"number",name:"cost",value:e.cost,onChange:j,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: 2500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock initial *"}),(0,r.jsx)("input",{type:"number",name:"stock",value:e.stock,onChange:j,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: 100"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock minimum *"}),(0,r.jsx)("input",{type:"number",name:"minStock",value:e.minStock,onChange:j,required:!0,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: 10"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit\xe9 de mesure *"}),(0,r.jsxs)("select",{name:"unit",value:e.unit,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,r.jsx)("option",{value:"kg",children:"Kilogramme (kg)"}),(0,r.jsx)("option",{value:"g",children:"Gramme (g)"}),(0,r.jsx)("option",{value:"l",children:"Litre (l)"}),(0,r.jsx)("option",{value:"pi\xe8ce",children:"Pi\xe8ce"}),(0,r.jsx)("option",{value:"sac",children:"Sac"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fournisseur"}),(0,r.jsx)("input",{type:"text",name:"supplier",value:e.supplier,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Ex: Ferme Mbolo"})]})]}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{name:"description",value:e.description,onChange:j,rows:4,maxLength:500,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Description du produit..."}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[e.description.length,"/500 caract\xe8res"]})]}),h&&(0,r.jsx)("p",{className:"mt-4 text-red-600 font-medium",children:h}),(0,r.jsxs)("div",{className:"mt-8 flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 font-medium",disabled:x,onClick:()=>{s({name:"",category:"",price:"",cost:"",stock:"",minStock:"",description:"",supplier:"",unit:"kg"}),c(null),u(null),g(null)},children:"Annuler"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium",disabled:x,children:x?"Ajout en cours...":"Ajouter le produit"})]})]})]})})]})]})}},4642:(e,s,a)=>{Promise.resolve().then(a.bind(a,2181))},4978:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var r=a(5155),t=a(5695),l=a(3915),i=a(5317);function n(){return(0,t.useRouter)(),(0,r.jsx)("header",{className:"bg-white shadow-sm border-b px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Tableau de bord"})}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("button",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-user-line text-green-600"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Admin"})]})})]})})}(0,l.Dk)().length||(0,l.Wp)({apiKey:"AIzaSyAYRMKz-rdcDJ9_wSC4GPJ5Nr9JGHNf98s",authDomain:"ag02-9e907.firebaseapp.com",projectId:"ag02-9e907",storageBucket:"ag02-9e907.firebasestorage.app",messagingSenderId:"646527347928",appId:"1:646527347928:web:dca6972379e7f72027bbad",measurementId:"G-8MX1LYCXS6"}),(0,i.aU)()},7349:(e,s,a)=>{"use strict";a.d(s,{A:()=>d});var r=a(5155),t=a(2115),l=a(6874),i=a.n(l),n=a(5695);function d(){let e=(0,n.usePathname)(),[s,a]=(0,t.useState)("dashboard");return(0,t.useEffect)(()=>{"/"===e?a("dashboard"):e.startsWith("/produits")?a("produits"):e.startsWith("/clients")?a("clients"):e.startsWith("/commandes")&&a("commandes")},[e]),(0,r.jsxs)("div",{className:"w-64 bg-white shadow-lg h-full",children:[(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-plant-line text-white"})}),(0,r.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Agri-Gabon"})]})}),(0,r.jsx)("div",{className:"p-6 border-b",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-user-line text-green-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Admin"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Administrateur"})]})]})}),(0,r.jsx)("nav",{className:"mt-6",children:[{id:"dashboard",label:"Dashboard",icon:"ri-dashboard-line",href:"/"},{id:"produits",label:"Produits",icon:"ri-product-hunt-line",href:"/produits"},{id:"clients",label:"Clients",icon:"ri-team-line",href:"/clients"},{id:"commandes",label:"Commandes",icon:"ri-shopping-cart-line",href:"/commandes"}].map(e=>(0,r.jsxs)(i(),{href:e.href,className:"flex items-center space-x-3 px-6 py-3 text-sm font-medium transition-colors ".concat(s===e.id?"bg-green-50 text-green-700 border-r-2 border-green-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>a(e.id),children:[(0,r.jsx)("i",{className:"".concat(e.icon," w-5 h-5 flex items-center justify-center")}),(0,r.jsx)("span",{children:e.label})]},e.id))})]})}},8915:(e,s,a)=>{"use strict";a.d(s,{I:()=>d,db:()=>n,y:()=>i});var r=a(3915),t=a(5317),l=a(7505);let i=(0,r.Dk)().length?(0,r.Dk)()[0]:(0,r.Wp)({apiKey:"AIzaSyAYRMKz-rdcDJ9_wSC4GPJ5Nr9JGHNf98s",authDomain:"ag02-9e907.firebaseapp.com",projectId:"ag02-9e907",storageBucket:"ag02-9e907.firebasestorage.app",messagingSenderId:"646527347928",appId:"1:646527347928:web:dca6972379e7f72027bbad",measurementId:"G-8MX1LYCXS6"}),n=(0,t.aU)(i),d=(0,l.c7)(i)}},e=>{var s=s=>e(e.s=s);e.O(0,[135,243,441,684,358],()=>s(4642)),_N_E=e.O()}]);