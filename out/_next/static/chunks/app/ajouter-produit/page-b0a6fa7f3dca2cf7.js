(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{407:(e,s,r)=>{Promise.resolve().then(r.bind(r,2181))},2181:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>m});var t=r(5155),a=r(2115),i=r(5695),l=r(7349),n=r(8915),o=r(5317),d=r(7505);let c=async e=>{try{let s=Date.now(),r="".concat(s,"_").concat(e.name),t=(0,d.KR)(n.IG,"products/".concat(r)),a=await (0,d.D)(t,e);return await (0,d.qk)(a.ref)}catch(e){throw console.error("Erreur lors de l’upload de l’image:",e),e}};function m(){let e=(0,i.useRouter)(),[s,r]=(0,a.useState)({nom:"",category:"",prix:"",stock:"",quantity:"",unite:"kg",published:!0,description:""}),[d,m]=(0,a.useState)([]),[u,x]=(0,a.useState)([]),[g,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),f=[{id:"fruits",name:"Fruits",description:"Fruits frais et bio"},{id:"legumes",name:"L\xe9gumes",description:"L\xe9gumes de saison"},{id:"confitures",name:"Confitures",description:"Confitures artisanales"},{id:"poissons",name:"Poissons",description:"Produits de la mer"},{id:"viandes",name:"Viandes",description:"Viandes locales"},{id:"boissons",name:"Boissons",description:"Boissons naturelles"}],j=parseInt(s.stock,10)||0,N=Math.floor(.1*j),v=j<=N?"stock-faible":"en-stock",y=e=>{let{name:t,value:a,type:i}=e.target;r({...s,[t]:"checkbox"===i?e.target.checked:a})},w=async e=>{e.preventDefault(),h(!0),b(null);try{let e=parseFloat(s.prix),t=parseInt(s.stock,10),a=parseInt(s.quantity,10);if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(a)||a<0)throw Error("Veuillez remplir correctement les champs num\xe9riques.");if(a>t)throw Error("La quantit\xe9 mise en vente ne peut pas d\xe9passer le stock initial.");let i=[];for(let e of d){let s=await c(e);i.push(s)}let l=i[0]||"",u=i.slice(1),g=s.category,h=f.find(e=>e.id===g),p=(null==h?void 0:h.name)||g,b=Math.floor(.1*t),j={nom:s.nom,prix:e,category:p,stock:t,maxStock:t,stockMinimum:b,description:s.description,quantity:a,unite:s.unite,imageUrl:l,images:u,status:t<=b?"stock-faible":"en-stock",published:s.published,createdAt:(0,o.O5)(),updatedAt:(0,o.O5)()},N=(0,o.H9)(n.db,"categories",g);(await (0,o.x7)(N)).exists()?await (0,o.mZ)(N,{nombreProduits:(0,o.GV)(1),updatedAt:(0,o.O5)()}):await (0,o.BN)(N,{nom:p,nombreProduits:1,createdAt:(0,o.O5)(),updatedAt:(0,o.O5)()}),await (0,o.gS)((0,o.rJ)(N,"produits"),j),alert("✅ Produit ajout\xe9 avec succ\xe8s !"),r({nom:"",category:"",prix:"",stock:"",quantity:"",unite:"kg",published:!0,description:""}),m([]),x([])}catch(e){console.error("Erreur ajout produit:",e),b(e.message||"Une erreur est survenue.")}finally{h(!1)}};return(0,t.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,t.jsx)(l.A,{}),(0,t.jsx)("div",{className:"flex-1 flex flex-col",children:(0,t.jsx)("main",{className:"flex-1 p-4 md:p-6 lg:p-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-6 md:mb-8",children:[(0,t.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Retour"]}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Ajouter un nouveau produit"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Remplissez les informations ci-dessous pour ajouter un produit."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),(0,t.jsxs)("span",{children:["Statut: ","en-stock"===v?"En stock":"Stock faible"]})]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:(0,t.jsx)("div",{className:"p-6 md:p-8",children:(0,t.jsxs)("form",{onSubmit:w,className:"space-y-8",children:[(0,t.jsxs)("div",{className:"border-b pb-8",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Images du produit"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,t.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-64 border-2 border-dashed border-gray-300 rounded-2xl cursor-pointer hover:border-green-500 hover:bg-green-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,t.jsxs)("p",{className:"mb-2 text-sm text-gray-500",children:[(0,t.jsx)("span",{className:"font-semibold",children:"Cliquez pour t\xe9l\xe9charger"})," ou glissez-d\xe9posez"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG jusqu'\xe0 5 Mo (max 5 images)"})]}),(0,t.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:e=>{if(e.target.files){let s=Array.from(e.target.files).slice(0,5),r=[];s.forEach(e=>{if(e.size>5242880)return void b("Chaque image ne doit pas d\xe9passer 5 Mo.");let t=new FileReader;t.onload=()=>{r.push(t.result),r.length===s.length&&x(r)},t.readAsDataURL(e)}),m(s),b(null)}},className:"hidden"})]})}),u.length>0&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsxs)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["Aper\xe7u des images (",u.length,"/5)"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-3",children:u.map((e,s)=>(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsx)("img",{src:e,alt:"Aper\xe7u ".concat(s+1),className:"h-24 w-24 object-cover rounded-xl shadow-md"}),0===s&&(0,t.jsx)("span",{className:"absolute top-1 left-1 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Principale"})]},s))})]})]})]}),(0,t.jsxs)("div",{className:"border-b pb-8",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informations du produit"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom du produit *"}),(0,t.jsx)("input",{type:"text",name:"nom",value:s.nom,onChange:y,required:!0,placeholder:"Ex: Pommes Golden Bio",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Cat\xe9gorie *"}),(0,t.jsxs)("select",{name:"category",value:s.category,onChange:y,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",children:[(0,t.jsx)("option",{value:"",children:"S\xe9lectionner une cat\xe9gorie"}),f.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," - ",e.description]},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Prix de vente (FCFA) *"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"number",name:"prix",value:s.prix,onChange:y,required:!0,min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"}),(0,t.jsx)("div",{className:"absolute right-3 top-3 text-gray-500",children:"FCFA"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Unit\xe9 de vente"}),(0,t.jsxs)("select",{name:"unite",value:s.unite,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",children:[(0,t.jsx)("option",{value:"kg",children:"Kilogramme (kg)"}),(0,t.jsx)("option",{value:"g",children:"Gramme (g)"}),(0,t.jsx)("option",{value:"l",children:"Litre (l)"}),(0,t.jsx)("option",{value:"pi\xe8ce",children:"Unit\xe9"}),(0,t.jsx)("option",{value:"sac",children:"Sac"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Stock initial *"}),(0,t.jsx)("input",{type:"number",name:"stock",value:s.stock,onChange:y,required:!0,min:"0",placeholder:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"}),j>0&&(0,t.jsxs)("div",{className:"mt-2 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Stock minimum (10%):"}),(0,t.jsxs)("span",{className:"font-medium",children:[N," ",s.unite]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("en-stock"===v?"bg-green-500":"bg-red-500")}),(0,t.jsx)("span",{className:"text-sm",children:"en-stock"===v?"✅ En stock":"⚠️ Stock faible"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Quantit\xe9 mise en vente *"}),(0,t.jsx)("input",{type:"number",name:"quantity",value:s.quantity,onChange:y,required:!0,min:"0",placeholder:"0",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Cette quantit\xe9 sera disponible pour les commandes."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Statut de publication"}),(0,t.jsxs)("select",{name:"published",value:s.published?"true":"false",onChange:e=>r({...s,published:"true"===e.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all",children:[(0,t.jsx)("option",{value:"true",children:"\uD83D\uDFE2 Publi\xe9"}),(0,t.jsx)("option",{value:"false",children:"\uD83D\uDD34 Masqu\xe9"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Description"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("textarea",{name:"description",value:s.description,onChange:y,rows:5,maxLength:500,placeholder:"D\xe9crivez votre produit en d\xe9tail...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all resize-none"}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,t.jsx)("span",{children:"Maximum 500 caract\xe8res"}),(0,t.jsxs)("span",{children:[s.description.length,"/500"]})]})]})]}),p&&(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:(0,t.jsxs)("p",{className:"text-red-700 font-medium",children:["⚠️ ",p]})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-6 border-t",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{r({nom:"",category:"",prix:"",stock:"",quantity:"",unite:"kg",published:!0,description:""}),m([]),x([])},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"Effacer le formulaire"}),(0,t.jsx)("button",{type:"submit",disabled:g,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-medium flex items-center justify-center gap-2",children:g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Ajout en cours..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Ajouter le produit"]})})]})]})})})]})})})]})}},7349:(e,s,r)=>{"use strict";r.d(s,{A:()=>o});var t=r(5155),a=r(2115),i=r(6874),l=r.n(i),n=r(5695);function o(){let e=(0,n.usePathname)(),[s,r]=(0,a.useState)("dashboard"),[i,o]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{"/"===e?r("dashboard"):e.startsWith("/produits")?r("produits"):e.startsWith("/clients")?r("clients"):e.startsWith("/commandes")?r("commandes"):e.startsWith("/livreurs")&&r("livreurs")},[e]),(0,t.jsxs)("div",{className:"bg-gradient-to-b from-gray-900 to-gray-800 text-white h-screen flex flex-col transition-all duration-300 ".concat(i?"w-20":"w-64"),children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-700 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 ".concat(i?"justify-center w-full":""),children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,t.jsx)("i",{className:"ri-leaf-line text-white text-xl"})}),!i&&(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("span",{className:"text-lg font-bold tracking-tight",children:"Agri-Gabon"}),(0,t.jsx)("span",{className:"text-xs text-green-300 font-medium",children:"Administration"})]})]}),(0,t.jsx)("button",{onClick:()=>o(!i),className:"p-1.5 rounded-lg bg-gray-800 hover:bg-gray-700 transition-colors","aria-label":i?"Agrandir le menu":"R\xe9duire le menu",children:(0,t.jsx)("i",{className:"ri-".concat(i?"menu-unfold":"menu-fold","-line text-lg")})})]}),(0,t.jsx)("div",{className:"p-6 border-b border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center ".concat(i?"justify-center":"space-x-3"),children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)("i",{className:"ri-user-3-line text-white text-xl"})}),(0,t.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 border-2 border-gray-900 rounded-full"})]}),!i&&(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Bienvenue"}),(0,t.jsxs)("div",{className:"flex items-center mt-1",children:[(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 bg-green-900/30 text-green-300 rounded-full",children:"En ligne"}),(0,t.jsx)("span",{className:"text-xs text-gray-400 ml-2",children:"Admin"})]})]})]})}),(0,t.jsx)("nav",{className:"mt-6 flex-1 px-3",children:(0,t.jsx)("div",{className:"space-y-1",children:[{id:"dashboard",label:"Dashboard",icon:"ri-dashboard-line",href:"/"},{id:"produits",label:"Produits",icon:"ri-product-hunt-line",href:"/produits"},{id:"clients",label:"Clients",icon:"ri-team-line",href:"/clients"},{id:"commandes",label:"Commandes",icon:"ri-shopping-cart-line",href:"/commandes"},{id:"livreurs",label:"Livreurs",icon:"ri-truck-line",href:"/livreurs"}].map(e=>(0,t.jsxs)(l(),{href:e.href,className:"flex items-center rounded-xl transition-all duration-200 group ".concat(i?"justify-center px-3 py-3":"px-4 py-3"," ").concat(s===e.id?"bg-gradient-to-r from-green-600/20 to-emerald-600/10 text-green-300 border-l-4 border-green-500":"text-gray-300 hover:bg-gray-800/50 hover:text-white"),onClick:()=>r(e.id),title:i?e.label:"",children:[(0,t.jsxs)("div",{className:"relative ".concat(i?"":"mr-3"),children:[(0,t.jsx)("i",{className:"".concat(e.icon," text-lg ").concat(s===e.id?"text-green-400":"text-gray-400 group-hover:text-white")}),s===e.id&&(0,t.jsx)("div",{className:"absolute -inset-2 bg-green-500/10 rounded-full blur-sm"})]}),!i&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"font-medium",children:e.label}),s===e.id&&(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})})]})]},e.id))})}),(0,t.jsx)("div",{className:"p-4 border-t border-gray-700",children:(0,t.jsx)("div",{className:"text-center mt-4 ".concat(i?"text-xs":"text-sm"),children:(0,t.jsx)("p",{className:"text-gray-500",children:"\xa9 2025 Agri-Gabon"})})}),(0,t.jsx)("div",{className:"lg:hidden absolute -right-3 top-1/2 transform -translate-y-1/2",children:(0,t.jsx)("button",{onClick:()=>o(!i),className:"w-6 h-10 bg-gray-800 rounded-r-lg flex items-center justify-center border border-gray-700",children:(0,t.jsx)("i",{className:"ri-arrow-".concat(i?"right":"left","-s-line text-gray-400")})})})]})}},8915:(e,s,r)=>{"use strict";r.d(s,{IG:()=>d,db:()=>o,j2:()=>c});var t=r(3915),a=r(5317),i=r(7505),l=r(5404);let n=(0,t.Dk)().length?(0,t.Dk)()[0]:(0,t.Wp)({apiKey:"AIzaSyAYRMKz-rdcDJ9_wSC4GPJ5Nr9JGHNf98s",authDomain:"ag02-9e907.firebaseapp.com",projectId:"ag02-9e907",storageBucket:"ag02-9e907.firebasestorage.app",messagingSenderId:"646527347928",appId:"1:646527347928:web:dca6972379e7f72027bbad",measurementId:"G-8MX1LYCXS6"}),o=(0,a.aU)(n),d=(0,i.c7)(n),c=(0,l.xI)(n)}},e=>{var s=s=>e(e.s=s);e.O(0,[135,965,29,441,684,358],()=>s(407)),_N_E=e.O()}]);