(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{5332:(e,t,s)=>{Promise.resolve().then(s.bind(s,8740))},8740:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),r=s(2115),n=s(7349),c=s(4978),l=s(8915),i=s(5317);function d(){let[e,t]=(0,r.useState)(!1),[s,d]=(0,r.useState)({name:"",product:"",type:"percentage",value:"",startDate:"",endDate:"",maxUsage:""}),[x,o]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{p(!0);let e=(0,i.rJ)(l.db,"promotions"),t=(0,i.aQ)(e,e=>{o(e.docs.map(e=>{let t=e.data();return{id:e.id,name:t.name,product:t.product,type:t.type,value:t.value,startDate:t.startDate,endDate:t.endDate,status:t.status,usageCount:t.usageCount,maxUsage:t.maxUsage}})),p(!1)},e=>{console.error("Erreur chargement promotions:",e),p(!1)});return()=>t()},[]);let u=async e=>{e.preventDefault();let a=new Date(s.startDate),r=new Date,n=a<=r&&new Date(s.endDate)>=r?"active":a>r?"scheduled":"expired",c={name:s.name,product:s.product,type:s.type,value:parseFloat(s.value),startDate:s.startDate,endDate:s.endDate,status:n,usageCount:0,maxUsage:s.maxUsage?parseInt(s.maxUsage):null,createdAt:(0,i.O5)()};try{await (0,i.gS)((0,i.rJ)(l.db,"promotions"),c),t(!1),d({name:"",product:"",type:"percentage",value:"",startDate:"",endDate:"",maxUsage:""})}catch(e){console.error("Erreur cr\xe9ation promotion:",e),alert("Erreur lors de la cr\xe9ation de la promotion.")}},h=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"scheduled":return"bg-blue-100 text-blue-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=e=>{switch(e){case"active":return"Active";case"scheduled":return"Programm\xe9e";case"expired":return"Expir\xe9e";default:return e}};return(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(n.A,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)(c.A,{}),(0,a.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-6",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Promotions"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Cr\xe9ez et g\xe9rez vos promotions"})]}),(0,a.jsxs)("button",{onClick:()=>t(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2 font-medium whitespace-nowrap cursor-pointer",children:[(0,a.jsx)("i",{className:"ri-add-line w-5 h-5 flex items-center justify-center"}),(0,a.jsx)("span",{children:"Nouvelle promotion"})]})]}),e&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Cr\xe9er une nouvelle promotion"}),(0,a.jsx)("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("i",{className:"ri-close-line w-5 h-5 flex items-center justify-center"})})]}),(0,a.jsx)("form",{onSubmit:u,className:"grid grid-cols-1 md:grid-cols-2 gap-4"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:m?(0,a.jsx)("p",{className:"p-6",children:"Chargement des promotions..."}):(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Promotion"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Produit"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Remise"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P\xe9riode"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisation"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[0===x.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-4 whitespace-nowrap text-center text-gray-500",children:"Aucune promotion disponible."})}),x.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.product})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:"percentage"===e.type?"".concat(e.value,"%"):"".concat(e.value," XAF")})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[e.startDate," - ",e.endDate]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[e.usageCount,e.maxUsage?"/".concat(e.maxUsage):""]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(h(e.status)),children:g(e.status)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-700",children:(0,a.jsx)("i",{className:"ri-edit-line w-4 h-4 flex items-center justify-center"})}),(0,a.jsx)("button",{className:"text-red-600 hover:text-red-700",children:(0,a.jsx)("i",{className:"ri-delete-bin-line w-4 h-4 flex items-center justify-center"})})]})})]},e.id))]})]})})})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[135,243,538,441,684,358],()=>t(5332)),_N_E=e.O()}]);