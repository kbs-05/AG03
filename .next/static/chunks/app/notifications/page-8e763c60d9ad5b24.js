(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{1074:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(5155),a=r(2115),i=r(7349),n=r(4978),l=r(8915),c=r(5317);function o(){let[e,t]=(0,a.useState)("all"),[r,o]=(0,a.useState)([]),[d,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,c.rJ)(l.db,"notifications"),t=(0,c.P)(e,(0,c.My)("date","desc"),(0,c.My)("time","desc")),r=(0,c.aQ)(t,e=>{o(e.docs.map(e=>({id:e.id,...e.data()}))),x(!1)});return()=>r()},[]);let m=async e=>{try{let t=(0,c.H9)(l.db,"notifications",e);await (0,c.mZ)(t,{read:!0})}catch(e){console.error("Erreur lors du marquage comme lu :",e)}},u=async()=>{try{let e=r.filter(e=>!e.read);await Promise.all(e.map(e=>(0,c.mZ)((0,c.H9)(l.db,"notifications",e.id),{read:!0})))}catch(e){console.error("Erreur lors du marquage de toutes les notifications :",e)}},g=r.filter(t=>"all"===e||("unread"===e?!t.read:t.type===e)),h=e=>{switch(e){case"order":return"ri-shopping-cart-line";case"client":return"ri-user-line";case"product":return"ri-package-line";case"system":return"ri-settings-line";default:return"ri-notification-line"}},y=e=>{switch(e){case"order":return"text-green-600 bg-green-100";case"client":return"text-blue-600 bg-blue-100";case"product":return"text-purple-600 bg-purple-100";default:return"text-gray-600 bg-gray-100"}},b=e=>{switch(e){case"high":return"border-l-red-500";case"medium":return"border-l-yellow-500";case"low":return"border-l-green-500";default:return"border-l-gray-500"}},f=r.filter(e=>!e.read).length;return d?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)("p",{className:"text-gray-600 text-lg",children:"Chargement des notifications..."})}):(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,s.jsx)(i.A,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(n.A,{}),(0,s.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Notifications"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:f>0?"".concat(f," notification").concat(f>1?"s":""," non lue").concat(f>1?"s":""):"Toutes les notifications sont lues"})]}),f>0&&(0,s.jsx)("button",{onClick:u,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium whitespace-nowrap cursor-pointer",children:"Tout marquer comme lu"})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsxs)("button",{onClick:()=>t("all"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors ".concat("all"===e?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Toutes (",r.length,")"]}),(0,s.jsxs)("button",{onClick:()=>t("unread"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors ".concat("unread"===e?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:["Non lues (",f,")"]}),(0,s.jsx)("button",{onClick:()=>t("order"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors ".concat("order"===e?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Commandes"}),(0,s.jsx)("button",{onClick:()=>t("client"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors ".concat("client"===e?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Clients"}),(0,s.jsx)("button",{onClick:()=>t("product"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors ".concat("product"===e?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Produits"}),(0,s.jsx)("button",{onClick:()=>t("system"),className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors ".concat("system"===e?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Syst\xe8me"})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:0===g.length?(0,s.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,s.jsx)("i",{className:"ri-notification-off-line w-16 h-16 flex items-center justify-center mx-auto mb-4 text-gray-400"}),(0,s.jsx)("p",{children:"Aucune notification trouv\xe9e"})]}):(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:g.map(e=>(0,s.jsx)("div",{className:"p-6 hover:bg-gray-50 cursor-pointer border-l-4 ".concat(b(e.priority)," ").concat(e.read?"":"bg-blue-50"),onClick:()=>m(e.id),children:(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(y(e.type)),children:(0,s.jsx)("i",{className:"".concat(h(e.type)," w-5 h-5 flex items-center justify-center")})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-medium ".concat(e.read?"text-gray-700":"text-gray-900"),children:e.title}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.time}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.date})]})]}),(0,s.jsx)("p",{className:"text-sm mt-1 ".concat(e.read?"text-gray-500":"text-gray-700"),children:e.message}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,s.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:"high"===e.priority?"Priorit\xe9 haute":"medium"===e.priority?"Priorit\xe9 moyenne":"Priorit\xe9 basse"}),!e.read&&(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]})]})},e.id))})})]})})]})]})}},6632:(e,t,r)=>{Promise.resolve().then(r.bind(r,1074))}},e=>{var t=t=>e(e.s=t);e.O(0,[135,243,538,441,684,358],()=>t(6632)),_N_E=e.O()}]);