(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{4418:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(5155),r=t(2115),i=t(7349),l=t(5695);function n(e){let{searchTerm:s,setSearchTerm:t,statusFilter:r,setStatusFilter:i}=e;return(0,l.useRouter)(),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("header",{className:"bg-white shadow-sm border-b px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Gestion des Commandes"}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>t(e.target.value),placeholder:"Recherche par ID ou client",className:"border rounded px-3 py-1 text-sm"}),(0,a.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"border rounded px-3 py-1 text-sm",children:[(0,a.jsx)("option",{value:"all",children:"Tous les statuts"}),(0,a.jsx)("option",{value:"En cours",children:"En cours"}),(0,a.jsx)("option",{value:"Exp\xe9di\xe9e",children:"Exp\xe9di\xe9e"}),(0,a.jsx)("option",{value:"Livr\xe9e",children:"Livr\xe9e"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("button",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100","aria-label":"Profil Admin",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-line text-green-600"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Admin"})]})})]})})})}function c(e){let{status:s}=e;return(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ".concat({"En cours":"bg-orange-100 text-orange-800",Expédiée:"bg-blue-100 text-blue-800",Livrée:"bg-green-100 text-green-800"}[s]),children:[(0,a.jsx)("i",{className:"".concat({"En cours":"ri-time-line",Expédiée:"ri-truck-line",Livrée:"ri-check-line"}[s]," w-3 h-3 flex items-center justify-center mr-1")}),s]})}function d(e){let{commandes:s}=e,[t,i]=(0,r.useState)("date"),[l,n]=(0,r.useState)("desc"),d=[...s].sort((e,s)=>{let a=e[t],r=s[t];return("montant"===t&&(a=parseInt(e.montant.replace(/[^0-9]/g,"")),r=parseInt(s.montant.replace(/[^0-9]/g,""))),"date"===t&&(a=new Date(e.date.split("/").reverse().join("-")).getTime(),r=new Date(s.date.split("/").reverse().join("-")).getTime()),a<r)?"asc"===l?-1:1:a>r?"asc"===l?1:-1:0}),x=(e,s,t)=>{t.stopPropagation(),console.log("Action ".concat(e," sur commande:"),s)};return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Toutes les commandes"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[s.length," commandes au total"]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"N\xb0 COMMANDE"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"CLIENT"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"DATE"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"MONTANT"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"STATUT"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ACTIONS"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-green-600",children:e.id}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.client}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.ville})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:e.date}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900",children:e.montant}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)(c,{status:e.statut})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{onClick:s=>x("voir",e.id,s),className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-blue-600",children:(0,a.jsx)("i",{className:"ri-eye-line w-4 h-4"})}),(0,a.jsx)("button",{onClick:s=>x("modifier",e.id,s),className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-green-600",children:(0,a.jsx)("i",{className:"ri-edit-line w-4 h-4"})}),(0,a.jsx)("button",{onClick:s=>x("supprimer",e.id,s),className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-red-600",children:(0,a.jsx)("i",{className:"ri-delete-bin-line w-4 h-4"})})]})})]},e.id))})]})}),0===d.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("i",{className:"ri-file-list-3-line w-12 h-12 mx-auto text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Aucune commande trouv\xe9e"})]})]})}var x=t(5317),m=t(8915);function o(){let[e,s]=(0,r.useState)(""),[t,l]=(0,r.useState)("all"),[c,o]=(0,r.useState)([]),[h,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{u(!0);try{let e=(0,x.P)((0,x.rJ)(m.db,"commandes"),(0,x.My)("date","desc")),s=(await (0,x.GG)(e)).docs.map(e=>{let s=e.data();return{id:e.id,client:s.client,ville:s.ville,produits:s.produits,montant:s.montant,date:s.date,statut:s.statut}});o(s)}catch(e){console.error("Erreur lors du chargement des commandes :",e)}finally{u(!1)}})()},[]);let p=(0,r.useMemo)(()=>c.filter(s=>{let a=s.id.toLowerCase().includes(e.toLowerCase())||s.client.toLowerCase().includes(e.toLowerCase()),r="all"===t||s.statut===t;return a&&r}),[c,e,t]);return h?(0,a.jsx)("div",{className:"flex min-h-screen justify-center items-center",children:(0,a.jsx)("div",{className:"text-gray-700",children:"Chargement des commandes..."})}):(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(i.A,{}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsx)(n,{searchTerm:e,setSearchTerm:s,statusFilter:t,setStatusFilter:l}),(0,a.jsx)("div",{className:"flex-1 p-6",children:(0,a.jsx)(d,{commandes:p})})]})]})}},5573:(e,s,t)=>{Promise.resolve().then(t.bind(t,4418))},7349:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(5155),r=t(2115),i=t(6874),l=t.n(i),n=t(5695);function c(){let e=(0,n.usePathname)(),[s,t]=(0,r.useState)("dashboard");return(0,r.useEffect)(()=>{"/"===e?t("dashboard"):e.startsWith("/produits")?t("produits"):e.startsWith("/clients")?t("clients"):e.startsWith("/commandes")&&t("commandes")},[e]),(0,a.jsxs)("div",{className:"w-64 bg-white shadow-lg h-full",children:[(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-plant-line text-white"})}),(0,a.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Agri-Gabon"})]})}),(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-user-line text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Admin"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Administrateur"})]})]})}),(0,a.jsx)("nav",{className:"mt-6",children:[{id:"dashboard",label:"Dashboard",icon:"ri-dashboard-line",href:"/"},{id:"produits",label:"Produits",icon:"ri-product-hunt-line",href:"/produits"},{id:"clients",label:"Clients",icon:"ri-team-line",href:"/clients"},{id:"commandes",label:"Commandes",icon:"ri-shopping-cart-line",href:"/commandes"}].map(e=>(0,a.jsxs)(l(),{href:e.href,className:"flex items-center space-x-3 px-6 py-3 text-sm font-medium transition-colors ".concat(s===e.id?"bg-green-50 text-green-700 border-r-2 border-green-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>t(e.id),children:[(0,a.jsx)("i",{className:"".concat(e.icon," w-5 h-5 flex items-center justify-center")}),(0,a.jsx)("span",{children:e.label})]},e.id))})]})}},8915:(e,s,t)=>{"use strict";t.d(s,{I:()=>c,db:()=>n,y:()=>l});var a=t(3915),r=t(5317),i=t(7505);let l=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)({apiKey:"AIzaSyAYRMKz-rdcDJ9_wSC4GPJ5Nr9JGHNf98s",authDomain:"ag02-9e907.firebaseapp.com",projectId:"ag02-9e907",storageBucket:"ag02-9e907.firebasestorage.app",messagingSenderId:"646527347928",appId:"1:646527347928:web:dca6972379e7f72027bbad",measurementId:"G-8MX1LYCXS6"}),n=(0,r.aU)(l),c=(0,i.c7)(l)}},e=>{var s=s=>e(e.s=s);e.O(0,[135,243,441,684,358],()=>s(5573)),_N_E=e.O()}]);